{{>header}}

<div id="content">
  <div id="documentation">
    <h2 class="intro">Creating &amp; Reading Secrets</h2>
    
    <ul id="docnav">
      <li class=""><a href="/docs/api" title="">Overview</a></li>
      <li class="selected"><a href="/docs/api/secrets" title="">Secrets</a></li>
    </ul>

    <div id="topicContent">
      
      <h3 class="cufon docTitle dotted">Share a Secret</h3>
      <span class="docSubtext">POST {{baseuri}}/api/v1/share</span>
      
      <p>
        Use this method to store a secret value.
      </p>
      
      <div class="options">
        <strong>Query Params</strong>
        <ul>
          <li><span class="name">secret</span>: the secret value which is encrypted before being stored. There is a maximum length based on your plan that is enforced (1k-10k).</li>
          <li><span class="name">passphrase</span>: a string that the recipient must know to view the secret. This value is also used to encrypt the secret and is bcrypted before being stored so we only have this value in transit.</li>
          <li><span class="name">ttl</span>: the maximum amount of time, in seconds, that the secret should survive (i.e. time-to-live). Once this time expires, the secret will be deleted and not recoverable.</li>
          <li><span class="name">recipient</span>: an email address. We will send a friendly email containing the secret link (NOT the secret itself).</li>
        </ul>
      </div>
      
      <div class="options">
        <strong>Attributes</strong>
        <ul>
          <li><span class="name">custid</span>: this is you :]</li>
          <li><span class="name">metadata_key</span>: the unique key for the metadata. DO NOT share this.</li>
          <li><span class="name">secret_key</span>: the unique key for the secret you create. This is key that you can share.</li>
          <li><span class="name">ttl</span>: The time-to-live that was specified (i.e. not the time remaining)</li>
          <li><span class="name">realttl</span>: <em>TBD</em></li>
          <li><span class="name">created</span>: Time the secret was created in unix time (UTC)</li>
          <li><span class="name">updated</span>: ditto, but the time it was last updated.</li>
        </ul>
      </div>
      
      <strong>Example:</strong>
      
      <pre class="colourize">$ curl -u 'USERNAME:APITOKEN' -F 'secret=[SECRET]' {{baseuri}}/api/v1/share</pre>
      <pre class="colourize">{
  "custid":"USERNAME",
  "metadata_key":"qjpjroeit8wra0ojeyhcw5pjsgwtuq7",
  "secret_key":"153l8vbwqx5taskp92pf05uvgjefvu9",
  "ttl":"3600",
  "updated":"1324174006",
  "created":"1324174006"
}</pre>
      
      <h3 class="cufon docTitle dotted">Generate a Secret</h3>
      <span class="docSubtext">POST {{baseuri}}/api/v1/generate</span>
      
      <p>Generate a short, unique secret. This is useful for temporary passwords, one-time pads, salts, etc.</p>
      
      <div class="options">
        <strong>Query Params</strong>
        <ul>
          <li><span class="name">passphrase</span>: a string that the recipient must know to view the secret. This value is also used to encrypt the secret and is bcrypted before being stored so we only have this value in transit.</li>
          <li><span class="name">ttl</span>: the maximum amount of time, in seconds, that the secret should survive (i.e. time-to-live). Once this time expires, the secret will be deleted and not recoverable.</li>
          <li><span class="name">recipient</span>: an email address. We will send a friendly email containing the secret link (NOT the secret itself).</li>
        </ul>
      </div>

      <pre class="colourize">$ curl -u 'USERNAME:APITOKEN' -d '' {{baseuri}}/api/v1/generate</pre>

      <pre class="colourize">{
  "custid":"USERNAME",
  "metadata_key":"2b6bjmudhmtiqjn2qmdaqjkqxp323gi",
  "secret_key":"pgcdv7org3vtdurif809sygnt0mstw6",
  "ttl":"3600",
  "updated":"1324174095",
  "created":"1324174095"
}</pre>
  
      <p></p>
      
      <div class="options">
        <strong>Attributes</strong><br/>
        <em>Same as Share A Secret above</em>
      </div>
      
      
      <h3 class="cufon docTitle dotted">Retrieve a Secret</h3>
      <span class="docSubtext">POST {{baseuri}}/api/v1/secret/:key</span>
      
      <p>
        
      </p>
      
      <div class="options">
        <strong>Query Params</strong>
        <ul>
          <li><span class="name">key</span>: the unique key for this secret.</li>
          <li><span class="name">passphrase</span> (if required): the passphrase is required only if the secret was create with one.</li>
        </ul>
      </div>
      
      <div class="options">
        <strong>Attributes</strong>
        <ul>
          <li><span class="name">custid</span>: this is you :]</li>
          <li><span class="name">metadata_key</span>: the unique key for the metadata. DO NOT share this.</li>
          <li><span class="name">secret_key</span>: the unique key for the secret you create. This is key that you can share.</li>
          <li><span class="name">ttl</span>: The time-to-live that was specified (i.e. not the time remaining)</li>
          <li><span class="name">realttl</span>: <em>TBD</em></li>
          <li><span class="name">created</span>: Time the secret was created in unix time (UTC)</li>
          <li><span class="name">updated</span>: ditto, but the time it was last updated.</li>
        </ul>
      </div>
      
      <strong>Example:</strong>
      
      <pre class="colourize">$ curl -u 'USERNAME:APITOKEN' -F 'secret=[SECRET]' {{baseuri}}/api/v1/share</pre>
      
      
      <br/><br/><br/>
    </div>
  </div>
</div>

{{>footer}}
